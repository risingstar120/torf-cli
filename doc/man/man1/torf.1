.\"t
.\" Automatically generated by Pandoc 1.19.2.4
.\"
.TH "TORF" "1" "" "" ""
.hy
.SH NAME
.PP
torf \- Command line tool to create, display and edit torrents
.SH SYNOPSIS
.PP
\f[B]torf\f[] [\f[I]PATH\f[]] [\f[I]OPTIONS\f[]]
.SH DESCRIPTION
.PP
torf can create new torrents, display information about existing
torrents, and edit torrents (e.g.
to remove a comment or change the tracker) without re\-hashing the
content.
.PP
Create: \f[B]torf\f[] [\f[I]PATH\f[]] [\f[I]OPTIONS\f[]] [\f[B]\-o\f[]
\f[I]TORRENT\f[]]
.PP
Display: \f[B]torf\f[] \f[B]\-i\f[] [\f[I]TORRENT\f[]]
.PP
Edit: \f[B]torf\f[] \f[B]\-i\f[] [\f[I]TORRENT\f[]] [\f[I]OPTIONS\f[]]
\f[B]\-o\f[] \f[I]TORRENT\f[]
.SH OPTIONS
.PP
Options that start with \f[B]\-\-no\f[] take precedence.
.TP
.B \f[I]PATH\f[]
The path to the torrent\[aq]s content.
.RS
.RE
.TP
.B \f[B]\-\-exclude\f[], \f[B]\-e\f[] \f[I]EXCLUDE\f[]
Exclude files from \f[I]PATH\f[] that match the pattern
\f[I]EXCLUDE\f[].
This option may be given multiple times.
It is ignored if \f[I]PATH\f[] is not a directory.
See \f[B]EXCLUDING FILES\f[].
.RS
.RE
.TP
.B \f[B]\-\-in\f[], \f[B]\-i\f[] \f[I]TORRENT\f[]
Read metainfo from \f[I]TORRENT\f[].
.RS
.RE
.TP
.B \f[B]\-\-out\f[], \f[B]\-o\f[] \f[I]TORRENT\f[]
Write torrent to \f[I]TORRENT\f[].
.RS
.PP
Default: \f[I]NAME\f[]\f[B].torrent\f[]
.RE
.TP
.B \f[B]\-\-magnet\f[], \f[B]\-m\f[]
Create magnet link.
.RS
.RE
.TP
.B \f[B]\-\-name\f[], \f[B]\-n\f[] \f[I]NAME\f[]
Destination file or directory when the torrent is downloaded.
.RS
.PP
Default: Basename of \f[I]PATH\f[]
.RE
.TP
.B \f[B]\-\-tracker\f[], \f[B]\-t\f[] \f[I]URL\f[]
The announce URL of a tracker.
This option may be given multiple times.
.RS
.RE
.TP
.B \f[B]\-\-notracker\f[], \f[B]\-T\f[]
Remove any trackers in edit mode or hide them in display mode.
.RS
.RE
.TP
.B \f[B]\-\-webseed\f[], \f[B]\-w\f[] \f[I]URL\f[]
A webseed URL (BEP19).
This option may be given multiple times.
.RS
.RE
.TP
.B \f[B]\-\-nowebseed\f[], \f[B]\-W\f[]
Remove any webseeds in edit mode or hide them in display mode.
.RS
.RE
.TP
.B \f[B]\-\-private\f[], \f[B]\-p\f[]
Tell clients to use tracker(s) exclusively for peer discovery.
.RS
.RE
.TP
.B \f[B]\-\-noprivate\f[], \f[B]\-P\f[]
Allow clients to use DHT and PEX for peer discovery.
.RS
.RE
.TP
.B \f[B]\-\-comment\f[], \f[B]\-c\f[] \f[I]COMMENT\f[]
A comment that is stored in the torrent file.
.RS
.RE
.TP
.B \f[B]\-\-nocomment\f[], \f[B]\-C\f[]
Remove an existing comment in edit mode or hide it in display mode.
.RS
.RE
.TP
.B \f[B]\-\-date\f[], \f[B]\-d\f[] \f[I]DATE\f[]
The creation date as
\f[I]YYYY\f[]\f[B]\-\f[]\f[I]MM\f[]\f[B]\-\f[]\f[I]DD\f[][
\f[I]HH\f[]\f[B]:\f[]\f[I]MM\f[][\f[B]:\f[]\f[I]SS\f[]]] \f[B]now\f[]
for local time or \f[B]today\f[] for local time at midnight.
.RS
.PP
Default: \f[B]today\f[]
.RE
.TP
.B \f[B]\-\-nodate\f[], \f[B]\-D\f[]
Remove an existing creation date in edit mode or hide it in display
mode.
.RS
.RE
.TP
.B \f[B]\-\-xseed\f[], \f[B]\-x\f[]
Randomize the info hash to help with cross\-seeding.
This simply adds an \f[B]entropy\f[] field to the \f[B]info\f[] section
of the metainfo and sets it to a random integer.
.RS
.RE
.TP
.B \f[B]\-\-noxseed\f[], \f[B]\-X\f[]
De\-randomize a previously randomized info hash of an existing torrent.
This removes the \f[B]entropy\f[] field from the \f[B]info\f[] section
of the metainfo.
.RS
.RE
.TP
.B \f[B]\-\-nocreator\f[], \f[B]\-R\f[]
Remove the name of the application that create the torrent in edit mode,
hide it in display mode or don\[aq]t add it in create mode.
.RS
.RE
.TP
.B \f[B]\-\-yes\f[], \f[B]\-y\f[]
Answer all yes/no prompts with "yes".
At the moment, all this does is overwrite \f[I]TORRENT\f[] without
asking.
.RS
.RE
.TP
.B \f[B]\-\-config\f[], \f[B]\-f\f[] \f[I]FILE\f[]
Read command line arguments from configuration FILE.
See \f[B]CONFIGURATION FILE\f[].
.RS
.PP
Default: \f[I]$XDG_CONFIG_HOME\f[]\f[B]/torf/config\f[]
.RE
.TP
.B \f[B]\-\-noconfig\f[], \f[B]\-F\f[]
Do not use any configuration file.
.RS
.RE
.TP
.B \f[B]\-\-profile\f[], \f[B]\-z\f[] PROFILE
Use predefined arguments specified in \f[I]PROFILE\f[].
This option may be given multiple times.
See \f[B]CONFIGURATION FILE\f[].
.RS
.RE
.TP
.B \f[B]\-\-human\f[], \f[B]\-u\f[]
Display information in human\-readable output even if stdout is not a
TTY.
See \f[B]PIPING OUTPUT\f[].
.RS
.RE
.TP
.B \f[B]\-\-nohuman\f[], \f[B]\-U\f[]
Display information in machine\-readable output even if stdout is a TTY.
See \f[B]PIPING OUTPUT\f[].
.RS
.RE
.TP
.B \f[B]\-\-help\f[], \f[B]\-h\f[]
Display a short help text and exit.
.RS
.RE
.TP
.B \f[B]\-\-version\f[], \f[B]\-V\f[]
Display the version number and exit.
.RS
.RE
.SH EXAMPLES
.PP
Create "foo.torrent" with two trackers and don\[aq]t store the creation
date:
.IP
.nf
\f[C]
torf\ path/to/foo
\ \ \ \ \ \-t\ http://example.org:6881/announce
\ \ \ \ \ \-t\ http://example.com:6881/announce
\ \ \ \ \ \-\-nodate
\f[]
.fi
.PP
Read "foo.torrent" and print its metainfo:
.IP
.nf
\f[C]
torf\ \-i\ foo.torrent
\f[]
.fi
.PP
Print only the name:
.IP
.nf
\f[C]
torf\ \-i\ foo.torrent\ |\ grep\ \[aq]^Name\[aq]\ |\ cut\ \-f2
\f[]
.fi
.PP
Change the comment and remove the date from foo.torrent, write the
result to bar.torrent:
.IP
.nf
\f[C]
torf\ \-i\ foo.torrent\ \-c\ \[aq]New\ comment\[aq]\ \-D\ \-o\ bar.torrent
\f[]
.fi
.SH EXCLUDING FILES
.PP
The \f[B]\-\-exclude\f[] option takes a pattern that is matched against
file names in \f[I]PATH\f[].
Any matching files are not included in the torrent.
Empty directories are not included because the torrent file format only
supports files.
.PP
Patterns use these special characters:
.PP
.TS
tab(@);
r l.
T{
*
T}@T{
matches everything
T}
T{
?
T}@T{
matches any single character
T}
T{
[SEQ]
T}@T{
matches any character in SEQ
T}
T{
[!SEQ]
T}@T{
matches any character not in SEQ
T}
.TE
.SH CONFIGURATION FILE
.PP
Configuration files list command line options with all leading "\-"
characters removed.
If an option takes a parameter, "=" is used as a separator.
Spaces before and after the "=" are ignored.
The parameter may be quoted with single or double quotes to preserve
leading and/or trailing spaces.
Lines that start with "#" are ignored.
.PP
All of the options listed in the \f[B]OPTIONS\f[] section are allowed
except for \f[I]PATH\f[], \f[B]config\f[], \f[B]noconfig\f[],
\f[B]profile\f[], \f[B]help\f[] and \f[B]version\f[].
.SS Profiles
.PP
A profile is a set of options bound to a name that is given to the
\f[B]\-\-profile\f[] option.
In the configuration file it is specified as "[\f[I]PROFILE NAME\f[]]"
followed by a list of options.
Profiles inherit any options specified globally at the top of the file,
but they can overload them.
.SS Example
.PP
This is an example configuration file with some global custom defaults
and the two profiles "foo" and "bar":
.IP
.nf
\f[C]
yes
nodate
exclude\ =\ *.txt

[foo]
tracker\ =\ https://foo1/announce
tracker\ =\ https://foo2/announce
private

[bar]
tracker\ =\ https://bar/announce
comment\ =\ I\ love\ bar.
xseed
\f[]
.fi
.PP
With this configuration file, these arguments are always used:
.IP
.nf
\f[C]
\-\-yes
\-\-nodate
\-\-exclude\ \[aq]*.txt\[aq]
\f[]
.fi
.PP
If "\-\-profile foo" is given, it also adds these arguments:
.IP
.nf
\f[C]
\-\-tracker\ https://foo1/announce
\-\-tracker\ https://foo2/announce
\-\-private
\f[]
.fi
.PP
If "\-\-profile foo" is given, it also adds these arguments:
.IP
.nf
\f[C]
\-\-tracker\ https://bar/announce
\-\-comment\ \[aq]I\ love\ bar.\[aq]
\-\-xseed
\f[]
.fi
.SH PIPING OUTPUT
.PP
If stdout is not a TTY (i.e.
when output is piped) or if the \f[B]\-\-nohuman\f[] option is provided,
the output format is slightly different:
.IP \[bu] 2
Leading spaces are removed from each line.
.IP \[bu] 2
The delimiter between label and value as well as between multiple values
(files, trackers, etc) is a tab character ("\\t" or ASCII code 0x9).
.IP \[bu] 2
Numbers are not formatted (seconds for time deltas, UNIX timestamps for
timestamps, raw bytes for sizes, etc).
.SH EXIT STATUS
.PP
torf returns zero on success and non\-zero on failure.
You can lookup error codes in the output of \f[B]errno \-l\f[].
.SH REPORTING BUGS
.PP
Bug reports, feature requests and poems about hedgehogs are welcome on
the issue tracker (https://github.com/rndusr/torf-cli/issues).
